{% extends "base.html" %}

{% block head %}

<style>
    canvas {
        width: 100%;
        max-width: 600px;
    }
</style>

{% endblock %}

{% block content %}

<div class="container">
    <div class="row">
        <div class="col-6">
            <div class="card">
                <div class="card-header">
                    <h3>Therapy Information</h3>
                </div>
                <div class="card-body">
                    <p>
                        In order to begin a therapy session you must firstly choose the therapist whom will conduct your session.
                        This therapist will then have a record of your emotional recognition results during the session to review.
                        Thus, it is import you make sure you select the right therapist.
                    </p>
                    {% if therapist %}
                    <p>
                        Your current therapist is {{ therapist }}. By default this therapist will be selected for your session, as they are 
                        registered to you. However, you can also change the therapist for this session via selecting a different one from the list of
                        options if a different therapist is conducting your current session.
                    </p>
                    {% else %}
                    <p> 
                        You currently do not have a selected therapist. Therefore, you must select a therapist from the list before conducting a 
                        therapy session.
                    </p>
                    {% endif %}
                    <p> 
                        Once you have chosen your therapist you can then start your therapy session. You can also choose the length of your session 
                        and have the ability to stop the session whenever you like. Please press "Start Session" when you are ready to begin and 
                        make sure your camera has a good view of your face.
                    </p>
                    <select class="form-select" aria-label="{{ therapist }}">
                        <option selected>Choose Therapist</option>
                        {% for therapist in therapist_list %}
                        <option value="{{ therapist.id }}">{{ therapist.first_name + " " + therapist.surname }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="card-footer">
                    <button type="button" class="btn btn-secondary">Begin Therapy Session</button>
                    <button type="button" class="btn btn-secondary">End Session</button>
                    <button type="button" class="btn btn-secondary">Select Session Length</button>
                </div>
            </div>
        </div>
        <div class="col-6">
            <div class="card">
                <div class="card-header">
                    <h3> Webcam feed </h3>
                </div>
                <div class="card-body">
                    <video id="video" width="100%" height="100%" autoplay></video>
                    <canvas id="webcamCanvas" width="640" height="480" style="display: none;">
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}

<script src="{{ url_for('static', filename='js/camera.js') }}"></script>

<script> 

</script>

{% endblock %}